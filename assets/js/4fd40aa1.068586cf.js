"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5776],{51283:(e,t,a)=>{a.r(t),a.d(t,{default:()=>d});var r=a(67294),l=a(54774),n=a(39960),s=a(95999),o=a(25934),c=a(9367);const u=e=>{let{children:t,messagesLength:a}=e;const l=(0,r.useRef)(null);return(0,r.useEffect)((()=>{const e=l.current;e&&(e.scrollTop=e.scrollHeight)}),[a]),r.createElement("div",{ref:l,className:"flex h-96 w-full flex-col gap-2 overflow-auto pr-1"},t)},m=(0,c.ZP)("https://jellychat.fly.dev");function d(){const[e,t]=(0,r.useState)(""),[a,n]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[x,E]=(0,r.useState)(null),w=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=localStorage.getItem("user_token");if(e)E(e);else{const e=(0,o.Z)();E(e),localStorage.setItem("user_token",e)}}),[]),(0,r.useEffect)((()=>(m.on("tool_start",(e=>{console.log("Tool start: ",e.tool_name),n((t=>[...t,{source:"tool",text:e.tool_name}]))})),m.on("final_message",(e=>{console.log("Final message: ",e.message),n((t=>[...t,{source:"jelly",text:e.message}])),d(!1)})),()=>{m.disconnect()})),[]);const k=async()=>{if(e){n((t=>[...t,{source:"human",text:e}])),d(!0),t("");try{m.emit("user_message",x,e)}catch(h){console.error(h)}}else p(!0)};return r.createElement(l.Z,{description:"Ask questions about DeFiChain which JellyChat will answer for you."},r.createElement("div",{className:"transition-color mapBackground flex items-center justify-center bg-cover bg-center bg-no-repeat py-16 md:py-28"},r.createElement("div",{className:"relative flex max-w-2xl grow flex-col items-center gap-3 rounded-3xl bg-white p-6 shadow-2xl dark:bg-backgroundDark md:p-10"},r.createElement(y,null),r.createElement(f,null),r.createElement("h1",{className:"mb-1"},r.createElement(s.Z,null,"JellyChat.Title")),r.createElement("p",{className:"mx-8 mb-2 text-center text-gray-600 dark:text-gray-200"},r.createElement(s.Z,null,"JellyChat.Instruction")),r.createElement(u,{messagesLength:a.length},a.map(((e,t)=>r.createElement(g,{key:t,message:e}))),c&&r.createElement("div",{className:"self-start rounded-lg bg-gray-50 px-4 shadow-md outline-none dark:bg-gray-800"},r.createElement("p",{className:"mb-0 animate-pulse text-lg"},"..."))),r.createElement(i,{setError:p,error:h,onSubmit:k,question:e,setQuestion:t,inputRef:w}),r.createElement(b,{disabled:c,onSubmit:k}))))}function i(e){let{error:t,onSubmit:a,question:l,setQuestion:n,inputRef:o,setError:c}=e;return r.createElement("div",{className:"relative w-full"},r.createElement("input",{className:"w-full rounded-lg border border-transparent bg-gray-50 p-5 pr-11 text-xl shadow-md outline-none hover:border-main-300 focus:border-main-700 dark:bg-gray-800  dark:hover:border-main-700 dark:focus:border-main-500 "+(t?"bg-main-100 dark:bg-main-900":""),type:"text",placeholder:(0,s.I)({message:"JellyChat.Placeholder"}),value:l,ref:o,onChange:e=>{n(e.target.value),c(!1)},onKeyDown:e=>{13===e.keyCode&&a()}}),r.createElement("div",{className:"absolute inset-y-0 right-3 flex items-center"},l&&r.createElement("button",{className:"flex h-6 w-6 cursor-pointer items-center justify-center rounded-full border-0 bg-gray-100 text-xs font-bold text-gray-600 dark:bg-gray-500 dark:text-gray-800",onClick:()=>{n(""),o.current.focus()}},"X")))}function g(e){let{message:t}=e;const{text:a,source:l}=t;return r.createElement(r.Fragment,null,"human"===l&&r.createElement("div",{className:"chatbubble_user max-w-md self-end rounded-lg border-0 bg-gray-50 py-4 px-4 shadow-md outline-none dark:bg-gray-800"},r.createElement("p",{className:"mb-0 text-lg"},a)),"tool"===l&&r.createElement("div",{className:"chatbubble_tool self-start rounded-lg border-0 bg-gray-50 py-2 px-4 shadow-md outline-none dark:bg-gray-800"},r.createElement("p",{className:"text-md mb-0 text-gray-700 dark:text-gray-300"},"*",a,"*")),"jelly"===l&&r.createElement("div",{className:"chatbubble_jelly mr-10 self-start rounded-lg border-0 bg-gray-50 py-4 px-4 shadow-md outline-none dark:bg-gray-800"},r.createElement("p",{className:"mb-0 text-lg"},a)))}function b(e){let{disabled:t,onSubmit:a}=e;return r.createElement("button",{className:"sendButton w-full cursor-pointer rounded-lg border-none p-4 text-lg text-white outline-none",onClick:a,disabled:t},r.createElement(s.Z,null,"JellyChat.Button"))}function f(){return r.createElement(n.Z,{className:"absolute top-5 right-5 flex h-10 w-10 cursor-pointer items-center justify-center rounded-full bg-gray-50 font-bold shadow-md dark:bg-gray-800",to:"/docs/auto/JellyChat"},"?")}function y(){return r.createElement("div",{className:"jellyChatBeta absolute top-0 left-0 h-32 w-32 drop-shadow-md"})}}}]);