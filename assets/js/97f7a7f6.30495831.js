"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8565],{3905:(e,t,a)=>{a.d(t,{Zo:()=>s,kt:()=>d});var r=a(67294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=r.createContext({}),p=function(e){var t=r.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):u(u({},t),e)),a},s=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),h=p(a),d=n,f=h["".concat(l,".").concat(d)]||h[d]||c[d]||o;return a?r.createElement(f,u(u({ref:t},s),{},{components:a})):r.createElement(f,u({ref:t},s))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,u=new Array(o);u[0]=h;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:n,u[1]=i;for(var p=2;p<o;p++)u[p]=a[p];return r.createElement.apply(null,u)}return r.createElement.apply(null,a)}h.displayName="MDXCreateElement"},78281:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>u,default:()=>c,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var r=a(87462),n=(a(67294),a(3905));const o={title:"Future Swap",description:"Future Swaps on DeFiChain. The way how the network uses futures to stabilize the dToken prices."},u=void 0,i={unversionedId:"auto/Future_Swap",id:"auto/Future_Swap",title:"Future Swap",description:"Future Swaps on DeFiChain. The way how the network uses futures to stabilize the dToken prices.",source:"@site/docs/auto/Future_Swap.md",sourceDirName:"auto",slug:"/auto/Future_Swap",permalink:"/docs/auto/Future_Swap",draft:!1,editUrl:"https://github.com/0ptim/DeFiChainWiki/tree/main/docs/auto/Future_Swap.md",tags:[],version:"current",lastUpdatedAt:1673906533,formattedLastUpdatedAt:"Jan 16, 2023",frontMatter:{title:"Future Swap",description:"Future Swaps on DeFiChain. The way how the network uses futures to stabilize the dToken prices."},sidebar:"tutorialSidebar",previous:{title:"Collateral Ratio",permalink:"/docs/auto/Collateral_Ratio"},next:{title:"Papers",permalink:"/docs/category/papers"}},l={},p=[{value:"Future Swap",id:"future-swap",level:2},{value:"Background",id:"background",level:3},{value:"Scheduling",id:"scheduling",level:3},{value:"Strategy",id:"strategy",level:3},{value:"Future Swap in the Light Wallet",id:"future-swap-in-the-light-wallet",level:3},{value:"Future Swap in the Desktop Wallet",id:"future-swap-in-the-desktop-wallet",level:3}],s={toc:p};function c(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,r.Z)({},s,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h2",{id:"future-swap"},"Future Swap"),(0,n.kt)("h3",{id:"background"},"Background"),(0,n.kt)("p",null,"after the introduction of stock tokens, they were traded with a premium. The prices on the DEX were higher than the prices from the oracle. To fight this premium (but also a possible discount) the future swaps were introduced with DFIP-2203-A."),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://github.com/DeFiCh/dfips/issues/127"},"https://github.com/DeFiCh/dfips/issues/127")),(0,n.kt)("p",null,"This swap is executed once a week (every 7","*","2880 blocks). You can buy for + 5% of the oracle price or sell for -5% of the oracle price, even if the Price is higher/lower than that 5%. Buy or sell means swapping to/from DUSD."),(0,n.kt)("h3",{id:"scheduling"},"Scheduling"),(0,n.kt)("p",null,"On defiscan.live you can find a countdown to the next future swap block via the link"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://defiscan.live/blocks/countdown/NextFutureSwap"},"https://defiscan.live/blocks/countdown/NextFutureSwap")),(0,n.kt)("p",null,"In the desktop wallet you can check the next future swap block using the command ",(0,n.kt)("strong",{parentName:"p"},"getfutureswapblock")),(0,n.kt)("p",null,"To quickly check for the current premium of the stock tokens you can use the dStocks Quickcheck page at"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://dstocks-defichain.web.app/"},"https://dstocks-defichain.web.app/")),(0,n.kt)("p",null,"On defichain analytics you can also follow the premium over time in a chart"),(0,n.kt)("p",null,(0,n.kt)("a",{parentName:"p",href:"https://www.defichain-analytics.com/vaultsLoans?entry=premium"},"https://www.defichain-analytics.com/vaultsLoans?entry=premium")),(0,n.kt)("h3",{id:"strategy"},"Strategy"),(0,n.kt)("p",null,"With this measure the price of the dTokens can be held in a +-5% corridor. In case of a higher premium or discount it can get arbitraged. For the case of a premium the following trade can be done"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Mint a dToken using a vault (take a loan)"),(0,n.kt)("li",{parentName:"ul"},"The collateralization ratio gets calculated using the oracle price (real price without premium)"),(0,n.kt)("li",{parentName:"ul"},"Sell the minted dToken on the DEX (swap to DUSD)"),(0,n.kt)("li",{parentName:"ul"},"Because of the premium, you get extra DUSD"),(0,n.kt)("li",{parentName:"ul"},"Do a future swap using the received DUSD to buy the dToken back paying the oracle price (cheaper because it's without premium)"),(0,n.kt)("li",{parentName:"ul"},"When the future Swap gets executed you will receive more dToken than you minted"),(0,n.kt)("li",{parentName:"ul"},"The loan (minted dToken) can be paid back and the additional dToken will stay in the wallet as a profit")),(0,n.kt)("h3",{id:"future-swap-in-the-light-wallet"},"Future Swap in the Light Wallet"),(0,n.kt)("p",null,"In the Light Wallet select the desired pool in the DEX tab. In the Swap menu you can switch from an instant swap to the future swap."),(0,n.kt)("p",null,(0,n.kt)("img",{alt:"Future swap in light wallet",src:a(85300).Z,width:"828",height:"1060"})),(0,n.kt)("h3",{id:"future-swap-in-the-desktop-wallet"},"Future Swap in the Desktop Wallet"),(0,n.kt)("p",null,"In the console view of the desktop wallet you can use the command ",(0,n.kt)("strong",{parentName:"p"},"futureswap"),"."),(0,n.kt)("p",null,"Syntax:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-abap"},'futureswap "address" "amount" ( "destination" [{"txid":"hex","vout":n},...] )\n')),(0,n.kt)("p",null,"For example to swap 500 DUSD to Netflix token:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-abap"},'futureswap "dVvPfdjhfdjhfjd32dPWZoNYno7uBUn1KyU" "500@DUSD" dNFLX)\n')),(0,n.kt)("p",null,"Using the command ",(0,n.kt)("strong",{parentName:"p"},"getpendingfutureswaps")," you can check which future swaps have alread been set for a given address."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-abap"},'getpendingfutureswaps "address"\n')))}c.isMDXComponent=!0},85300:(e,t,a)=>{a.d(t,{Z:()=>r});const r=a.p+"assets/images/future_swap_01-ce76bc672018c3ac35936e8475c851e5.jpg"}}]);